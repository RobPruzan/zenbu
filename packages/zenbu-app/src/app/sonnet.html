<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cozy Calendar</title>
    <style>
      :root {
        --primary: #a67c52;
        --primary-light: #d4b996;
        --secondary: #8d6e63;
        --accent: #ff9e80;
        --text: #5d4037;
        --background: #f5f5f5;
        --card-bg: #fff9f0;
        --shadow: rgba(166, 124, 82, 0.2);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: var(--background);
        color: var(--text);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f5f5f5"/><path d="M0 0L100 100M100 0L0 100" stroke="%23e0e0e0" stroke-width="0.5"/></svg>');
        transition: background-color 1s ease;
        padding: 20px;
      }

      .calendar-container {
        width: 100%;
        max-width: 900px;
        background: var(--card-bg);
        border-radius: 24px;
        box-shadow: 0 12px 30px var(--shadow);
        overflow: hidden;
        position: relative;
        transition: all 0.3s ease;
      }

      .calendar-container:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px var(--shadow);
      }

      .calendar-header {
        background: var(--primary);
        color: white;
        padding: 25px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-radius: 24px 24px 0 0;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 150 150"><path d="M0 0L150 150M150 0L0 150" stroke="%23ffffff22" stroke-width="1"/></svg>');
      }

      .month-year {
        font-size: 28px;
        font-weight: 600;
        letter-spacing: 1px;
      }

      .nav-buttons {
        display: flex;
        gap: 15px;
      }

      .nav-btn {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: white;
        font-size: 18px;
        transition: all 0.2s ease;
      }

      .nav-btn:hover {
        background: rgba(255, 255, 255, 0.4);
        transform: scale(1.05);
      }

      .today-btn {
        background: var(--accent);
        color: var(--text);
        border: none;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 3px 10px rgba(255, 158, 128, 0.3);
      }

      .today-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(255, 158, 128, 0.4);
      }

      .weekdays {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        text-align: center;
        padding: 15px 0;
        background: var(--primary-light);
        color: var(--text);
        font-weight: 600;
      }

      .days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-gap: 10px;
        padding: 20px;
      }

      .day {
        aspect-ratio: 1/1;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        padding: 10px;
        border-radius: 16px;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        background: rgba(255, 255, 255, 0.5);
        border: 1px solid rgba(212, 185, 150, 0.2);
      }

      .day:hover {
        background: rgba(255, 255, 255, 0.9);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px var(--shadow);
      }

      .day.current-month {
        color: var(--text);
      }

      .day.other-month {
        color: #bdbdbd;
      }

      .day.today {
        background: var(--primary-light);
        font-weight: bold;
        border: 2px solid var(--primary);
      }

      .day.selected {
        background: var(--accent);
        color: white;
      }

      .day-number {
        font-size: 16px;
        font-weight: 500;
        margin-bottom: 5px;
      }

      .weather-icon {
        font-size: 14px;
        margin-top: 2px;
        color: var(--secondary);
      }

      .event-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--accent);
        margin-top: 4px;
      }

      .calendar-footer {
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid rgba(212, 185, 150, 0.3);
      }

      .event-panel {
        padding: 20px;
        background: white;
        border-radius: 16px;
        margin: 0 20px 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .event-panel h3 {
        margin-bottom: 15px;
        color: var(--primary);
        font-size: 18px;
        border-bottom: 2px solid var(--primary-light);
        padding-bottom: 8px;
      }

      .event-list {
        max-height: 200px;
        overflow-y: auto;
      }

      .event-item {
        padding: 10px;
        margin-bottom: 10px;
        background: var(--card-bg);
        border-radius: 8px;
        border-left: 3px solid var(--accent);
        transition: all 0.2s ease;
      }

      .event-item:hover {
        transform: translateX(5px);
        box-shadow: 0 3px 10px var(--shadow);
      }

      .event-time {
        font-size: 12px;
        color: var(--secondary);
      }

      .event-title {
        font-weight: 600;
        margin: 5px 0;
      }

      .add-event {
        background: var(--primary);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        transition: all 0.2s ease;
      }

      .add-event:hover {
        background: var(--secondary);
        transform: scale(1.05);
      }

      .season-decoration {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        opacity: 0.1;
      }

      .leaves {
        position: absolute;
        width: 20px;
        height: 20px;
        background: var(--accent);
        opacity: 0.6;
        border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
        animation: float 10s infinite ease-in-out;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(10deg);
        }
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .modal-content {
        background: var(--card-bg);
        padding: 30px;
        border-radius: 16px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }

      .modal h2 {
        margin-bottom: 20px;
        color: var(--primary);
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: var(--text);
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--primary-light);
        border-radius: 8px;
        font-size: 16px;
        background: white;
      }

      .form-group textarea {
        min-height: 100px;
        resize: vertical;
      }

      .form-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 20px;
      }

      .btn {
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease;
      }

      .btn-cancel {
        background: #e0e0e0;
        color: #757575;
      }

      .btn-save {
        background: var(--primary);
        color: white;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .calendar-header {
          flex-direction: column;
          gap: 15px;
          padding: 20px;
        }

        .days {
          grid-gap: 5px;
          padding: 10px;
        }

        .day {
          padding: 5px;
        }

        .day-number {
          font-size: 14px;
        }

        .event-panel {
          margin: 0 10px 10px;
        }
      }

      /* Day/night cycle */
      .day-cycle {
        position: absolute;
        top: 0;
        right: 0;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        margin: 20px;
        background: linear-gradient(to bottom, #ffdb58, #ff9e80);
        box-shadow: 0 0 20px rgba(255, 222, 88, 0.6);
        transition: all 1s ease;
      }

      .night-mode {
        --primary: #5d4037;
        --primary-light: #8d6e63;
        --secondary: #6d4c41;
        --accent: #ff7043;
        --text: #d7ccc8;
        --background: #37474f;
        --card-bg: #455a64;
        --shadow: rgba(0, 0, 0, 0.3);
      }

      .night-mode .day-cycle {
        background: linear-gradient(to bottom, #c2c2c2, #7986cb);
        box-shadow: 0 0 20px rgba(121, 134, 203, 0.6);
      }

      /* Weather icons */
      .weather-icon {
        font-size: 16px;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
    </style>
  </head>
  <body>
    <div class="calendar-container">
      <div class="season-decoration" id="seasonDecoration"></div>

      <div class="calendar-header">
        <div class="month-year" id="monthYear">April 2025</div>
        <div class="nav-buttons">
          <button class="nav-btn" id="prevMonth">❮</button>
          <button class="today-btn" id="todayBtn">Today</button>
          <button class="nav-btn" id="nextMonth">❯</button>
        </div>
      </div>

      <div class="weekdays">
        <div>Sun</div>
        <div>Mon</div>
        <div>Tue</div>
        <div>Wed</div>
        <div>Thu</div>
        <div>Fri</div>
        <div>Sat</div>
      </div>

      <div class="days" id="daysContainer"></div>

      <div class="event-panel">
        <h3 id="selectedDateHeader">Events for April 14, 2025</h3>
        <div class="event-list" id="eventList">
          <!-- Events will be populated here -->
        </div>
      </div>

      <div class="calendar-footer">
        <div class="day-cycle" id="dayCycle"></div>
        <button class="add-event" id="addEventBtn">
          <span>+</span> Add Event
        </button>
      </div>
    </div>

    <div class="modal" id="eventModal">
      <div class="modal-content">
        <h2>Add New Event</h2>
        <form id="eventForm">
          <div class="form-group">
            <label for="eventTitle">Event Title</label>
            <input type="text" id="eventTitle" required />
          </div>
          <div class="form-group">
            <label for="eventTime">Time</label>
            <input type="time" id="eventTime" />
          </div>
          <div class="form-group">
            <label for="eventDescription">Description</label>
            <textarea id="eventDescription"></textarea>
          </div>
          <div class="form-buttons">
            <button type="button" class="btn btn-cancel" id="cancelBtn">
              Cancel
            </button>
            <button type="submit" class="btn btn-save">Save Event</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Calendar functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize variables
        let currentDate = new Date();
        let selectedDate = new Date();
        let events = {};

        // DOM elements
        const daysContainer = document.getElementById("daysContainer");
        const monthYearElement = document.getElementById("monthYear");
        const prevMonthBtn = document.getElementById("prevMonth");
        const nextMonthBtn = document.getElementById("nextMonth");
        const todayBtn = document.getElementById("todayBtn");
        const selectedDateHeader =
          document.getElementById("selectedDateHeader");
        const eventList = document.getElementById("eventList");
        const addEventBtn = document.getElementById("addEventBtn");
        const eventModal = document.getElementById("eventModal");
        const eventForm = document.getElementById("eventForm");
        const cancelBtn = document.getElementById("cancelBtn");
        const dayCycle = document.getElementById("dayCycle");
        const seasonDecoration = document.getElementById("seasonDecoration");

        // Initialize calendar
        renderCalendar();
        createSeasonalDecoration();
        checkDayNightCycle();

        // Event listeners
        prevMonthBtn.addEventListener("click", () => {
          currentDate.setMonth(currentDate.getMonth() - 1);
          renderCalendar();
        });

        nextMonthBtn.addEventListener("click", () => {
          currentDate.setMonth(currentDate.getMonth() + 1);
          renderCalendar();
        });

        todayBtn.addEventListener("click", () => {
          currentDate = new Date();
          selectedDate = new Date();
          renderCalendar();
          updateEventList();
        });

        addEventBtn.addEventListener("click", () => {
          eventModal.style.display = "flex";
        });

        cancelBtn.addEventListener("click", () => {
          eventModal.style.display = "none";
        });

        eventForm.addEventListener("submit", (e) => {
          e.preventDefault();

          const title = document.getElementById("eventTitle").value;
          const time = document.getElementById("eventTime").value;
          const description = document.getElementById("eventDescription").value;

          addEvent(selectedDate, title, time, description);

          eventForm.reset();
          eventModal.style.display = "none";

          renderCalendar();
          updateEventList();
        });

        // Close modal when clicking outside
        window.addEventListener("click", (e) => {
          if (e.target === eventModal) {
            eventModal.style.display = "none";
          }
        });

        // Check day/night cycle every minute
        setInterval(checkDayNightCycle, 60000);

        // Functions
        function renderCalendar() {
          daysContainer.innerHTML = "";

          const year = currentDate.getFullYear();
          const month = currentDate.getMonth();

          // Update header
          const monthNames = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
          ];
          monthYearElement.textContent = `${monthNames[month]} ${year}`;

          // Get first day of month and last day of month
          const firstDay = new Date(year, month, 1);
          const lastDay = new Date(year, month + 1, 0);

          // Get days from previous month to fill first week
          const startingDayOfWeek = firstDay.getDay();
          const prevMonthLastDay = new Date(year, month, 0).getDate();

          // Total days to show (previous month days + current month days + next month days)
          const totalDays = 42; // 6 rows of 7 days

          // Create day elements
          for (let i = 0; i < totalDays; i++) {
            const dayElement = document.createElement("div");
            dayElement.classList.add("day");

            // Calculate the date for this cell
            let dayNumber;
            let dayDate;

            if (i < startingDayOfWeek) {
              // Previous month days
              dayNumber = prevMonthLastDay - startingDayOfWeek + i + 1;
              dayElement.classList.add("other-month");
              dayDate = new Date(year, month - 1, dayNumber);
            } else if (i < startingDayOfWeek + lastDay.getDate()) {
              // Current month days
              dayNumber = i - startingDayOfWeek + 1;
              dayElement.classList.add("current-month");
              dayDate = new Date(year, month, dayNumber);

              // Check if it's today
              const today = new Date();
              if (
                dayDate.getDate() === today.getDate() &&
                dayDate.getMonth() === today.getMonth() &&
                dayDate.getFullYear() === today.getFullYear()
              ) {
                dayElement.classList.add("today");
              }

              // Check if it's selected date
              if (
                dayDate.getDate() === selectedDate.getDate() &&
                dayDate.getMonth() === selectedDate.getMonth() &&
                dayDate.getFullYear() === selectedDate.getFullYear()
              ) {
                dayElement.classList.add("selected");
              }
            } else {
              // Next month days
              dayNumber = i - (startingDayOfWeek + lastDay.getDate()) + 1;
              dayElement.classList.add("other-month");
              dayDate = new Date(year, month + 1, dayNumber);
            }

            // Create day number element
            const dayNumberElement = document.createElement("div");
            dayNumberElement.classList.add("day-number");
            dayNumberElement.textContent = dayNumber;
            dayElement.appendChild(dayNumberElement);

            // Add weather icon (random for demo)
            const weatherIcons = [
              "☀️",
              "🌤️",
              "⛅",
              "🌥️",
              "☁️",
              "🌧️",
              "⛈️",
              "🌨️",
            ];
            const weatherElement = document.createElement("div");
            weatherElement.classList.add("weather-icon");

            // Deterministic "random" weather based on date
            const weatherIndex =
              (dayDate.getDate() * (dayDate.getMonth() + 1)) %
              weatherIcons.length;
            weatherElement.textContent = weatherIcons[weatherIndex];
            dayElement.appendChild(weatherElement);

            // Check if there are events for this day
            const dateKey = formatDateKey(dayDate);
            if (events[dateKey] && events[dateKey].length > 0) {
              const eventDot = document.createElement("div");
              eventDot.classList.add("event-dot");
              dayElement.appendChild(eventDot);
            }

            // Add click event to select day
            dayElement.addEventListener("click", () => {
              // Remove selected class from all days
              document.querySelectorAll(".day.selected").forEach((day) => {
                day.classList.remove("selected");
              });

              // Add selected class to clicked day
              dayElement.classList.add("selected");

              // Update selected date
              selectedDate = new Date(dayDate);

              // Update event list
              updateEventList();
            });

            daysContainer.appendChild(dayElement);
          }

          // Update event list for selected date
          updateEventList();
        }

        function updateEventList() {
          // Update header
          const options = {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
          };
          selectedDateHeader.textContent = `Events for ${selectedDate.toLocaleDateString("en-US", options)}`;

          // Clear event list
          eventList.innerHTML = "";

          // Get events for selected date
          const dateKey = formatDateKey(selectedDate);
          const dayEvents = events[dateKey] || [];

          if (dayEvents.length === 0) {
            const noEventsElement = document.createElement("div");
            noEventsElement.textContent = "No events for this day";
            noEventsElement.style.padding = "10px";
            noEventsElement.style.fontStyle = "italic";
            noEventsElement.style.color = "#888";
            eventList.appendChild(noEventsElement);
            return;
          }

          // Sort events by time
          dayEvents.sort((a, b) => {
            if (!a.time) return 1;
            if (!b.time) return -1;
            return a.time.localeCompare(b.time);
          });

          // Add events to list
          dayEvents.forEach((event) => {
            const eventElement = document.createElement("div");
            eventElement.classList.add("event-item", "fade-in");

            const timeElement = document.createElement("div");
            timeElement.classList.add("event-time");
            timeElement.textContent = event.time || "All day";

            const titleElement = document.createElement("div");
            titleElement.classList.add("event-title");
            titleElement.textContent = event.title;

            const descElement = document.createElement("div");
            descElement.classList.add("event-description");
            descElement.textContent = event.description || "";

            eventElement.appendChild(timeElement);
            eventElement.appendChild(titleElement);

            if (event.description) {
              eventElement.appendChild(descElement);
            }

            eventList.appendChild(eventElement);
          });
        }

        function addEvent(date, title, time, description) {
          const dateKey = formatDateKey(date);

          if (!events[dateKey]) {
            events[dateKey] = [];
          }

          events[dateKey].push({
            title,
            time,
            description,
          });
        }

        function formatDateKey(date) {
          return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;
        }

        function checkDayNightCycle() {
          const hour = new Date().getHours();

          // Night mode between 7 PM and 6 AM
          if (hour >= 19 || hour < 6) {
            document.body.classList.add("night-mode");
          } else {
            document.body.classList.remove("night-mode");
          }

          // Update day cycle indicator
          updateDayCycleIndicator(hour);
        }

        function updateDayCycleIndicator(hour) {
          // Calculate position based on time of day
          const position = (hour / 24) * 100;

          // Update gradient based on time
          if (hour >= 5 && hour < 8) {
            // Sunrise
            dayCycle.style.background =
              "linear-gradient(to bottom, #ff9e80, #ffdb58)";
            dayCycle.style.boxShadow = "0 0 20px rgba(255, 158, 128, 0.6)";
          } else if (hour >= 8 && hour < 16) {
            // Day
            dayCycle.style.background =
              "linear-gradient(to bottom, #ffdb58, #ffdb58)";
            dayCycle.style.boxShadow = "0 0 20px rgba(255, 222, 88, 0.6)";
          } else if (hour >= 16 && hour < 19) {
            // Sunset
            dayCycle.style.background =
              "linear-gradient(to bottom, #ff9e80, #ff7043)";
            dayCycle.style.boxShadow = "0 0 20px rgba(255, 158, 128, 0.6)";
          } else {
            // Night
            dayCycle.style.background =
              "linear-gradient(to bottom, #7986cb, #3f51b5)";
            dayCycle.style.boxShadow = "0 0 20px rgba(121, 134, 203, 0.6)";
          }
        }

        function createSeasonalDecoration() {
          // Clear existing decorations
          seasonDecoration.innerHTML = "";

          // Get current month to determine season
          const month = new Date().getMonth();

          // Create decorations based on season
          if (month >= 2 && month <= 4) {
            // Spring: floating flowers
            createFloatingElements("🌸", 10, "pink");
          } else if (month >= 5 && month <= 7) {
            // Summer: sun and clouds
            createFloatingElements("☀️", 5, "yellow");
            createFloatingElements("☁️", 5, "white");
          } else if (month >= 8 && month <= 10) {
            // Fall: leaves
            createLeaves(15);
          } else {
            // Winter: snowflakes
            createFloatingElements("❄️", 15, "white");
          }
        }

        function createFloatingElements(emoji, count, color) {
          for (let i = 0; i < count; i++) {
            const element = document.createElement("div");
            element.textContent = emoji;
            element.style.position = "absolute";
            element.style.fontSize = `${Math.random() * 20 + 10}px`;
            element.style.left = `${Math.random() * 100}%`;
            element.style.top = `${Math.random() * 100}%`;
            element.style.opacity = "0.7";
            element.style.animation = `float ${Math.random() * 10 + 5}s infinite ease-in-out ${Math.random() * 5}s`;

            seasonDecoration.appendChild(element);
          }
        }

        function createLeaves(count) {
          const colors = [
            "#ff9e80",
            "#ffab91",
            "#ffccbc",
            "#d7ccc8",
            "#a1887f",
          ];

          for (let i = 0; i < count; i++) {
            const leaf = document.createElement("div");
            leaf.classList.add("leaves");
            leaf.style.left = `${Math.random() * 100}%`;
            leaf.style.top = `${Math.random() * 100}%`;
            leaf.style.background =
              colors[Math.floor(Math.random() * colors.length)];
            leaf.style.transform = `rotate(${Math.random() * 360}deg)`;
            leaf.style.animationDuration = `${Math.random() * 10 + 10}s`;
            leaf.style.animationDelay = `${Math.random() * 5}s`;

            seasonDecoration.appendChild(leaf);
          }
        }

        // Add some sample events
        addEvent(
          new Date(),
          "Coffee with Alex",
          "09:30",
          "Discuss project timeline",
        );
        addEvent(new Date(), "Team Meeting", "14:00", "Weekly progress update");

        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        addEvent(tomorrow, "Dentist Appointment", "11:15", "Annual checkup");

        const nextWeek = new Date();
        nextWeek.setDate(nextWeek.getDate() + 7);
        addEvent(
          nextWeek,
          "Birthday Party",
          "18:00",
          "Don't forget to bring a gift!",
        );
      });
    </script>
  </body>
</html>
