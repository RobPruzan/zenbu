<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Universe Game</title>
    <script src="http://localhost:42069"></script>
    <style>
      body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #000;
      }
      
      #game-container {
        position: relative;
        width: 100vw;
        height: 100vh;
      }
      
      #starfield {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
      
      #nebula {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2;
        opacity: 0.5;
      }
      
      #player {
        position: absolute;
        width: 50px;
        height: 50px;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><polygon points="25,0 50,50 25,35 0,50" fill="%23fff"/></svg>');
        z-index: 10;
      }
      
      .shuriken {
        position: absolute;
        width: 20px;
        height: 20px;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><circle cx="10" cy="10" r="5" fill="%2300ffff"/></svg>');
        z-index: 9;
      }
      
      .boss {
        position: absolute;
        width: 100px;
        height: 100px;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23ff0000"/><circle cx="50" cy="50" r="20" fill="%23000"/><circle cx="50" cy="50" r="10" fill="%23fff"/></svg>');
        z-index: 8;
      }
      
      .tendril {
        position: absolute;
        background-color: #ff6600;
        z-index: 7;
      }
      
      .dust {
        position: absolute;
        width: 2px;
        height: 2px;
        background-color: rgba(255, 255, 255, 0.5);
        z-index: 3;
      }
      
      #hud {
        position: absolute;
        top: 10px;
        left: 10px;
        color: #fff;
        font-size: 18px;
        z-index: 100;
      }
    </style>
  </head>
  <body>
    <div id="game-container">
      <div id="starfield"></div>
      <div id="nebula"></div>
      <div id="player"></div>
      <div id="hud">
        <div id="score">Score: 0</div>
        <div id="health">Health: 100</div>
      </div>
    </div>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const gameContainer = document.getElementById('game-container');
        const player = document.getElementById('player');
        const starfield = document.getElementById('starfield');
        const nebula = document.getElementById('nebula');
        const scoreDisplay = document.getElementById('score');
        const healthDisplay = document.getElementById('health');
        
        // Game state
// Game state
        const state = {
          playerX: window.innerWidth / 2,
          playerY: window.innerHeight - 100,
          playerHealth: 100,
          score: 0,
          shurikens: [],
          bossProjectiles: [],
          boss: null,
          tendrils: [],
          dust: [],
          keys: {
            ArrowLeft: false,
            ArrowRight: false,
            ArrowUp: false,
            ArrowDown: false,
            Space: false
          },
          lastShurikenTime: 0,
          gameOver: false
        };
        
        // Initialize stars
        function createStars() {
          for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.className = 'dust';
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.width = `${Math.random() * 3 + 1}px`;
            star.style.height = star.style.width;
            star.style.opacity = Math.random();
            star.dataset.speed = Math.random() * 2 + 0.5;
            starfield.appendChild(star);
            state.dust.push(star);
          }
        }
        
        // Create nebula effect
        function createNebula() {
          const colors = ['#ff00ff', '#00ffff', '#ff6600', '#9900ff'];
          for (let i = 0; i < 5; i++) {
            const cloud = document.createElement('div');
            cloud.style.position = 'absolute';
            cloud.style.width = `${Math.random() * 300 + 200}px`;
            cloud.style.height = `${Math.random() * 300 + 200}px`;
            cloud.style.borderRadius = '50%';
            cloud.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            cloud.style.filter = 'blur(60px)';
            cloud.style.opacity = '0.2';
            cloud.style.left = `${Math.random() * 100}%`;
            cloud.style.top = `${Math.random() * 100}%`;
            nebula.appendChild(cloud);
          }
        }
        
        // Create boss
        function createBoss() {
          const boss = document.createElement('div');
          boss.className = 'boss';
          boss.style.left = `${window.innerWidth / 2 - 50}px`;
          boss.style.top = '100px';
          gameContainer.appendChild(boss);
          
          state.boss = {
            element: boss,
            x: window.innerWidth / 2 - 50,
            y: 100,
            health: 100,
            direction: 1,
            lastAttackTime: 0
          };
          
          // Create tendrils
          for (let i = 0; i < 5; i++) {
            const tendril = document.createElement('div');
            tendril.className = 'tendril';
            gameContainer.appendChild(tendril);
            state.tendrils.push({
              element: tendril,
              angle: (i * Math.PI * 2) / 5,
              length: 50,
              width: 10
            });
          }
        }
        
        // Handle keyboard input
        function setupControls() {
          window.addEventListener('keydown', (e) => {
            if (e.code in state.keys) {
              state.keys[e.code] = true;
              if (e.code === 'Space') {
                shootShuriken();
              }
            }
          });
          
          window.addEventListener('keyup', (e) => {
            if (e.code in state.keys) {
              state.keys[e.code] = false;
            }
          });
        }
        
        // Shoot shuriken
        function shootShuriken() {
          const now = Date.now();
          if (now - state.lastShurikenTime > 300) { // Cooldown
            const shuriken = document.createElement('div');
            shuriken.className = 'shuriken';
            shuriken.style.left = `${state.playerX + 15}px`;
            shuriken.style.top = `${state.playerY - 20}px`;
            gameContainer.appendChild(shuriken);
            
            state.shurikens.push({
              element: shuriken,
              x: state.playerX + 15,
              y: state.playerY - 20
            });
            
            state.lastShurikenTime = now;
          }
        }
        
        // Update player position
        function updatePlayer() {
          const speed = 5;
          
          if (state.keys.ArrowLeft && state.playerX > 0) {
            state.playerX -= speed;
          }
          if (state.keys.ArrowRight && state.playerX < window.innerWidth - 50) {
            state.playerX += speed;
          }
          if (state.keys.ArrowUp && state.playerY > 0) {
            state.playerY -= speed;
          }
          if (state.keys.ArrowDown && state.playerY < window.innerHeight - 50) {
            state.playerY += speed;
          }
          
          player.style.left = `${state.playerX}px`;
          player.style.top = `${state.playerY}px`;
        }
        
        // Update shurikens
        function updateShurikens() {
          for (let i = state.shurikens.length - 1; i >= 0; i--) {
            const shuriken = state.shurikens[i];
            shuriken.y -= 10;
            shuriken.element.style.top = `${shuriken.y}px`;
            
            // Remove if out of bounds
            if (shuriken.y < -20) {
              gameContainer.removeChild(shuriken.element);
              state.shurikens.splice(i, 1);
              continue;
            }
            
            // Check collision with boss
            if (state.boss && 
                shuriken.x < state.boss.x + 100 &&
                shuriken.x + 20 > state.boss.x &&
                shuriken.y < state.boss.y + 100 &&
                shuriken.y + 20 > state.boss.y) {
              
              gameContainer.removeChild(shuriken.element);
              state.shurikens.splice(i, 1);
              
              state.boss.health -= 5;
              state.score += 10;
              scoreDisplay.textContent = `Score: ${state.score}`;
              
              if (state.boss.health <= 0) {
                gameContainer.removeChild(state.boss.element);
                state.boss = null;
                state.score += 500;
                scoreDisplay.textContent = `Score: ${state.score}`;
                
                // Remove tendrils
                state.tendrils.forEach(tendril => {
                  gameContainer.removeChild(tendril.element);
                });
                state.tendrils = [];
                
                // Respawn boss after delay
                setTimeout(createBoss, 5000);
              }
            }
          }
        }
        
        // Update boss
        function updateBoss() {
          if (!state.boss) return;
          
          // Move boss
          state.boss.x += state.boss.direction * 2;
          if (state.boss.x <= 0 || state.boss.x >= window.innerWidth - 100) {
            state.boss.direction *= -1;
          }
          
          state.boss.element.style.left = `${state.boss.x}px`;
          
          // Update tendrils
          state.tendrils.forEach((tendril, i) => {
            tendril.angle += 0.02;
            const endX = state.boss.x + 50 + Math.cos(tendril.angle) * tendril.length;
            const endY = state.boss.y + 50 + Math.sin(tendril.angle) * tendril.length;
            
            const dx = endX - (state.boss.x + 50);
            const dy = endY - (state.boss.y + 50);
            const angle = Math.atan2(dy, dx);
            
            tendril.element.style.width = `${tendril.length}px`;
            tendril.element.style.height = `${tendril.width}px`;
            tendril.element.style.left = `${state.boss.x + 50}px`;
            tendril.element.style.top = `${state.boss.y + 50}px`;
            tendril.element.style.transformOrigin = '0 0';
            tendril.element.style.transform = `rotate(${angle}rad)`;
            
            // Check collision with player
            const playerCenterX = state.playerX + 25;
            const playerCenterY = state.playerY + 25;
            const distance = Math.sqrt(
              Math.pow(playerCenterX - endX, 2) + 
              Math.pow(playerCenterY - endY, 2)
            );
            
            if (distance < 30) {
              state.playerHealth -= 0.5;
              healthDisplay.textContent = `Health: ${Math.floor(state.playerHealth)}`;
              if (state.playerHealth <= 0 && !state.gameOver) {
                state.gameOver = true;
                setTimeout(() => {
                  location.reload();
                }, 1000);
              }
            }
          });
          
          // Boss attacks
          const now = Date.now();
          if (now - state.boss.lastAttackTime > 2000) {
            // Shoot at player
            const attackElement = document.createElement('div');
            attackElement.className = 'shuriken';
            attackElement.style.backgroundColor = 'red';
            attackElement.style.left = `${state.boss.x + 50 - 10}px`;
            attackElement.style.top = `${state.boss.y + 50}px`;
            gameContainer.appendChild(attackElement);
            
            const angle = Math.atan2(
              (state.playerY + 25) - (state.boss.y + 50),
              (state.playerX + 25) - (state.boss.x + 50)
            );
            
            const attack = {
              element: attackElement,
              x: state.boss.x + 50 - 10,
              y: state.boss.y + 50,
              vx: Math.cos(angle) * 5,
              vy: Math.sin(angle) * 5
            };
            
            // Create a separate array for boss projectiles to handle them differently
            if (!state.bossProjectiles) state.bossProjectiles = [];
            state.bossProjectiles.push(attack);
            state.boss.lastAttackTime = now;
          }
        }
        
        // Update stars
        function updateStars() {
          state.dust.forEach(star => {
            const speed = parseFloat(star.dataset.speed);
            const y = parseFloat(star.style.top);
            star.style.top = `${(y + speed) % 100}%`;
          });
        }
        
        // Update boss projectiles
        function updateBossProjectiles() {
          if (!state.bossProjectiles) return;
          
          for (let i = state.bossProjectiles.length - 1; i >= 0; i--) {
            const projectile = state.bossProjectiles[i];
            projectile.x += projectile.vx;
            projectile.y += projectile.vy;
            projectile.element.style.left = `${projectile.x}px`;
            projectile.element.style.top = `${projectile.y}px`;
            
            // Remove if out of bounds
            if (projectile.x < -20 || projectile.x > window.innerWidth || 
                projectile.y < -20 || projectile.y > window.innerHeight) {
              gameContainer.removeChild(projectile.element);
              state.bossProjectiles.splice(i, 1);
              continue;
            }
            
            // Check collision with player
            if (projectile.x < state.playerX + 50 &&
                projectile.x + 20 > state.playerX &&
                projectile.y < state.playerY + 50 &&
                projectile.y + 20 > state.playerY) {
              
              gameContainer.removeChild(projectile.element);
              state.bossProjectiles.splice(i, 1);
              
              state.playerHealth -= 10;
              healthDisplay.textContent = `Health: ${Math.floor(state.playerHealth)}`;
              
              if (state.playerHealth <= 0 && !state.gameOver) {
                state.gameOver = true;
                setTimeout(() => {
                  location.reload();
                }, 1000);
              }
            }
          }
        }
        
        // Game loop
        function gameLoop() {
          updatePlayer();
          updateShurikens();
          updateBoss();
          updateBossProjectiles();
          updateStars();
          
          requestAnimationFrame(gameLoop);
        }
        
        // Initialize game
        function init() {
          player.style.left = `${state.playerX}px`;
          player.style.top = `${state.playerY}px`;
          
          createStars();
          createNebula();
          createBoss();
          setupControls();
          gameLoop();
        }
        
        init();
      });
    </script>
  </body>
</html>